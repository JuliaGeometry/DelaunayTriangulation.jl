<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Adding or Clearing Ghost Triangles · DelaunayTriangulation.jl</title><meta name="title" content="Adding or Clearing Ghost Triangles · DelaunayTriangulation.jl"/><meta property="og:title" content="Adding or Clearing Ghost Triangles · DelaunayTriangulation.jl"/><meta property="twitter:title" content="Adding or Clearing Ghost Triangles · DelaunayTriangulation.jl"/><meta name="description" content="Documentation for DelaunayTriangulation.jl."/><meta property="og:description" content="Documentation for DelaunayTriangulation.jl."/><meta property="twitter:description" content="Documentation for DelaunayTriangulation.jl."/><meta property="og:url" content="https://JuliaGeometry.github.io/DelaunayTriangulation.jl/tutorials/operations_ghost_triangles/"/><meta property="twitter:url" content="https://JuliaGeometry.github.io/DelaunayTriangulation.jl/tutorials/operations_ghost_triangles/"/><link rel="canonical" href="https://JuliaGeometry.github.io/DelaunayTriangulation.jl/tutorials/operations_ghost_triangles/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DelaunayTriangulation.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox" checked/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../unconstrained/">Unconstrained Triangulations</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Constrained Triangulations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../constrained_edges/">Constrained Edges</a></li><li><a class="tocitem" href="../constrained_outer_boundary/">Outer Boundary</a></li><li><a class="tocitem" href="../constrained_outer_boundary_segmented/">Segmented Outer Boundary</a></li><li><a class="tocitem" href="../constrained_multiply_connected/">Domain with Interior Holes</a></li><li><a class="tocitem" href="../constrained_interior_within_interiors/">Domain with Interior Holes inside Interior Holes</a></li><li><a class="tocitem" href="../constrained_multipolygon/">Disjoint Domains</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox" checked/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">Triangulation Operations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../operations_vertex_insertion_deletion/">Vertex Insertion and Deletion</a></li><li><a class="tocitem" href="../operations_segment_insertion/">Edge Insertion</a></li><li class="is-active"><a class="tocitem" href>Adding or Clearing Ghost Triangles</a><ul class="internal"><li><a class="tocitem" href="#Adding-or-Clearing-Ghost-Triangles"><span>Adding or Clearing Ghost Triangles</span></a></li><li><a class="tocitem" href="#Just-the-code"><span>Just the code</span></a></li></ul></li><li><a class="tocitem" href="../operations_flip_edge/">Edge Flipping</a></li><li><a class="tocitem" href="../operations_legalise_edge/">Legalising an Edge</a></li><li><a class="tocitem" href="../operations_split_edge/">Edge Splitting</a></li><li><a class="tocitem" href="../operations_split_triangle/">Triangle Splitting</a></li><li><a class="tocitem" href="../operations_convex_hull_locking/">Locking and Unlocking the Convex Hull</a></li></ul></li><li><a class="tocitem" href="../refinement/">Mesh Refinement</a></li><li><a class="tocitem" href="../lattice/">Triangulating Rectangular Regions</a></li><li><a class="tocitem" href="../convex/">Triangulating Convex Polygons</a></li><li><a class="tocitem" href="../curve_bounded/">Triangulating Curve-Bounded Domains</a></li><li><a class="tocitem" href="../weighted/">Weighted Triangulations</a></li><li><a class="tocitem" href="../voronoi/">Voronoi Tessellations</a></li><li><input class="collapse-toggle" id="menuitem-2-11" type="checkbox"/><label class="tocitem" for="menuitem-2-11"><span class="docs-label">Clipped Voronoi Tessellations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../clipped/">Clipping to the Convex Hull</a></li><li><a class="tocitem" href="../clipped_rectangle/">Clipping to a Rectangle</a></li><li><a class="tocitem" href="../clipped_polygon/">Clipping to a Generic Convex Polygon</a></li></ul></li><li><a class="tocitem" href="../centroidal/">Centroidal Voronoi Tessellations</a></li><li><a class="tocitem" href="../power/">Power Diagrams</a></li><li><a class="tocitem" href="../point_location/">Point Location</a></li><li><a class="tocitem" href="../nearest/">Nearest Neighbour Queries</a></li><li><a class="tocitem" href="../convex_hull/">Convex Hulls</a></li><li><a class="tocitem" href="../pole_of_inaccessibility/">Pole of Inaccessibility</a></li><li><a class="tocitem" href="../point_in_polygon/">Point-in-Polygon Testing</a></li><li><a class="tocitem" href="../custom_primitive/">Using Custom Structs for Primitives and Boundaries</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/overview/">Overview</a></li><li><a class="tocitem" href="../../manual/primitives/">Representing Primitives</a></li><li><a class="tocitem" href="../../manual/boundaries/">Representing Boundaries</a></li><li><a class="tocitem" href="../../manual/ghost_triangles/">Ghost (Negative) Vertices</a></li><li><a class="tocitem" href="../../manual/curve_bounded/">Defining Curve-Bounded Domains</a></li><li><a class="tocitem" href="../../manual/predicates/">Geometrical Predicates</a></li><li><a class="tocitem" href="../../manual/triangulation_output/">Triangulation Output</a></li><li><a class="tocitem" href="../../manual/voronoi_output/">Voronoi Tessellation Output</a></li><li><a class="tocitem" href="../../manual/predicate_kernels/">Predicate Kernels</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/overview/">Section Overview</a></li><li><a class="tocitem" href="../../api/data_structures/">Data Structures</a></li><li><a class="tocitem" href="../../api/triangulation/">Triangulations</a></li><li><a class="tocitem" href="../../api/operations/">Triangulation Operations</a></li><li><a class="tocitem" href="../../api/voronoi/">Voronoi Tessellations</a></li><li><a class="tocitem" href="../../api/convex_hull/">Convex Hull</a></li><li><a class="tocitem" href="../../api/curves/">Curves</a></li><li><a class="tocitem" href="../../api/iterators/">Iterators</a></li><li><a class="tocitem" href="../../api/point_location/">Point Location</a></li><li><a class="tocitem" href="../../api/predicates/">Predicates</a></li><li><a class="tocitem" href="../../api/statistics/">Triangulation Statistics</a></li><li><a class="tocitem" href="../../api/primitives/">Primitive Interfaces</a></li><li><a class="tocitem" href="../../api/other/">Other</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Extended Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../extended/overview/">Overview</a></li><li><a class="tocitem" href="../../extended/data_structures/">Data Structures</a></li><li><a class="tocitem" href="../../extended/algorithms/">Algorithm Internals</a></li><li><a class="tocitem" href="../../extended/utils/">Utility Functions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Mathematical Details</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../math/overview/">Overview</a></li><li><a class="tocitem" href="../../math/delaunay/">Delaunay Triangulations</a></li><li><a class="tocitem" href="../../math/constrained/">Constrained Delaunay Triangulations</a></li><li><a class="tocitem" href="../../math/convex/">Triangulating Convex Polygons</a></li><li><a class="tocitem" href="../../math/refinement/">Mesh Refinement</a></li><li><a class="tocitem" href="../../math/curves/">Curves</a></li><li><a class="tocitem" href="../../math/curve_bounded/">Triangulating Curve-Bounded Domains</a></li><li><a class="tocitem" href="../../math/weighted/">Weighted Delaunay Triangulations</a></li><li><a class="tocitem" href="../../math/voronoi/">Voronoi Tessellations</a></li><li><a class="tocitem" href="../../math/clipped/">Clipped Voronoi Tessellations</a></li><li><a class="tocitem" href="../../math/centroidal/">Centroidal Voronoi Tessellations</a></li><li><a class="tocitem" href="../../math/power/">Power Diagrams</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Example Applications</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../applications/overview/">Overview</a></li><li><a class="tocitem" href="../../applications/interpolation/">Interpolation</a></li><li><a class="tocitem" href="../../applications/cell_simulations/">Cellular Biology</a></li><li><a class="tocitem" href="../../applications/pde_discretisation/">Solving PDEs</a></li></ul></li><li><a class="tocitem" href="../../terminology/">Terminology</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li><a class="is-disabled">Triangulation Operations</a></li><li class="is-active"><a href>Adding or Clearing Ghost Triangles</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Adding or Clearing Ghost Triangles</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaGeometry/DelaunayTriangulation.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaGeometry/DelaunayTriangulation.jl/tree/main/docs/src/literate_tutorials/operations_ghost_triangles.jl" title="View source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Triangulation-Operations"><a class="docs-heading-anchor" href="#Triangulation-Operations">Triangulation Operations</a><a id="Triangulation-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Triangulation-Operations" title="Permalink"></a></h1><h2 id="Adding-or-Clearing-Ghost-Triangles"><a class="docs-heading-anchor" href="#Adding-or-Clearing-Ghost-Triangles">Adding or Clearing Ghost Triangles</a><a id="Adding-or-Clearing-Ghost-Triangles-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-or-Clearing-Ghost-Triangles" title="Permalink"></a></h2><p>An important component to be aware of when considering dynamic updates to triangulations are the ghost triangles. As we discussed in the <a href="../operations_vertex_insertion_deletion/">vertex insertion/deletion example</a>, ghost triangles are needed when we are making updates outside of the boundary of the current triangulation.</p><pre><code class="language-julia hljs">using DelaunayTriangulation
using CairoMakie</code></pre><p>Let us take an example triangulation.</p><pre><code class="language-julia hljs">points = [(-1.0, -1.0), (1.0, -1.0), (0.0, 1.0)]
tri = triangulate(points)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Delaunay Triangulation.
   Number of vertices: 3
   Number of triangles: 1
   Number of edges: 3
   Has boundary nodes: false
   Has ghost triangles: true
   Curve-bounded: false
   Weighted: false
   Constrained: false</code></pre><pre><code class="language-julia hljs">fig, ax, sc = triplot(tri, show_ghost_edges = true)
fig</code></pre><img src="84bedbd5.png" alt="Example block output"/><p>The ghost triangles are represented by the convex regions bounded by the blue lines. By default, <code>triangulate</code> will keep these ghost triangles. If you want to remove them, you&#39;d have to use <a href="../../api/operations/#DelaunayTriangulation.delete_ghost_triangles!"><code>delete_ghost_triangles!</code></a> or use <code>delete_ghosts = true</code> inside <code>triangulate</code>.</p><p>If you do need to query whether your triangulation already has ghost triangles, use</p><pre><code class="language-julia hljs">DelaunayTriangulation.has_ghost_triangles(tri)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><p>To clear the ghost triangles, use</p><pre><code class="language-julia hljs">delete_ghost_triangles!(tri)
DelaunayTriangulation.has_ghost_triangles(tri)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">false</code></pre><p>An important note for us to make is that ghost triangles are not just there as a concept, but they are actually physically stored. Adding them back with <a href="../../api/operations/#DelaunayTriangulation.add_ghost_triangles!"><code>add_ghost_triangles!</code></a>, we have:</p><pre><code class="language-julia hljs">add_ghost_triangles!(tri)
get_triangles(tri)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Set{Tuple{Int64, Int64, Int64}} with 4 elements:
  (3, 2, -1)
  (1, 2, 3)
  (1, 3, -1)
  (2, 1, -1)</code></pre><p>See that there is not just the triangle <code>(1, 2, 3)</code>, but also <code>(3, 2, -1)</code>, <code>(1, 3, -1)</code>, and <code>(2, 1, -1)</code> (where the ghost triangles are also oriented counter-clockwise). For example,</p><pre><code class="language-julia hljs">get_adjacent(tri, 3, 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-1</code></pre><pre><code class="language-julia hljs">get_adjacent(tri, 3, -1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1</code></pre><pre><code class="language-julia hljs">get_adjacent(tri, -1, 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1</code></pre><pre><code class="language-julia hljs">get_neighbours(tri, -1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Set{Int64} with 3 elements:
  2
  3
  1</code></pre><pre><code class="language-julia hljs">get_adjacent2vertex(tri, -1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Set{Tuple{Int64, Int64}} with 3 elements:
  (3, 2)
  (1, 3)
  (2, 1)</code></pre><p>If we delete them, they are no longer there.</p><pre><code class="language-julia hljs">delete_ghost_triangles!(tri)
get_triangles(tri)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Set{Tuple{Int64, Int64, Int64}} with 1 element:
  (1, 2, 3)</code></pre><p>As a last note, we remark that the ghost vertices that define the vertex of these ghost triangles is still there regardless of whether the triangulation has ghost triangles. Thus, for example, the following still work</p><pre><code class="language-julia hljs">get_neighbours(tri, -1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Set{Int64} with 3 elements:
  2
  3
  1</code></pre><pre><code class="language-julia hljs">get_adjacent2vertex(tri, -1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Set{Tuple{Int64, Int64}} with 3 elements:
  (3, 2)
  (1, 3)
  (2, 1)</code></pre><pre><code class="language-julia hljs">get_adjacent(tri, 3, 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">-1</code></pre><p>You can remove them from the graph, using</p><pre><code class="language-julia hljs">DelaunayTriangulation.delete_ghost_vertices_from_graph!(tri)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Graph
    Number of edges: 6
    Number of vertices: 3</code></pre><p>so that e.g. <code>get_neighbours(tri, -1)</code> is then an error. This will still not remove them from the <code>adjacent</code> and <code>adjacent2vertex</code> maps, but it does mean for example that</p><pre><code class="language-julia hljs">collect(each_solid_vertex(tri)) == collect(each_vertex(tri))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">true</code></pre><h2 id="Just-the-code"><a class="docs-heading-anchor" href="#Just-the-code">Just the code</a><a id="Just-the-code-1"></a><a class="docs-heading-anchor-permalink" href="#Just-the-code" title="Permalink"></a></h2><p>An uncommented version of this example is given below. You can view the source code for this file <a href="https://github.com/JuliaGeometry/DelaunayTriangulation.jl/tree/main/docs/src/literate_tutorials/operations_ghost_triangles.jl">here</a>.</p><pre><code class="language-julia hljs">using DelaunayTriangulation
using CairoMakie

points = [(-1.0, -1.0), (1.0, -1.0), (0.0, 1.0)]
tri = triangulate(points)

fig, ax, sc = triplot(tri, show_ghost_edges = true)
fig

DelaunayTriangulation.has_ghost_triangles(tri)

delete_ghost_triangles!(tri)
DelaunayTriangulation.has_ghost_triangles(tri)

add_ghost_triangles!(tri)
get_triangles(tri)

get_adjacent(tri, 3, 2)

get_adjacent(tri, 3, -1)

get_adjacent(tri, -1, 2)

get_neighbours(tri, -1)

get_adjacent2vertex(tri, -1)

delete_ghost_triangles!(tri)
get_triangles(tri)

get_neighbours(tri, -1)

get_adjacent2vertex(tri, -1)

get_adjacent(tri, 3, 2)

DelaunayTriangulation.delete_ghost_vertices_from_graph!(tri)

collect(each_solid_vertex(tri)) == collect(each_vertex(tri))</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../operations_segment_insertion/">« Edge Insertion</a><a class="docs-footer-nextpage" href="../operations_flip_edge/">Edge Flipping »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 30 October 2024 18:49">Wednesday 30 October 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
